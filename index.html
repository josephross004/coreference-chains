<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coreference Timeline and Sankey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Style generated by Github Copilot and Tailwind CSS */
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        .container { max-width: 1200px; margin: auto; padding: 20px; }
        .chart-section { 
            padding: 20px; 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
            margin-bottom: 20px; 
        }
        .timeline-container, #sankey-container, #transition-summary-container {
            overflow-x: auto;
        }
        .timeline-container svg { 
            /* Ensure the SVG scales dynamically in height but can grow horizontally */
            min-width: 100%; 
            height: auto; 
            display: block; 
        }
        .axis-label { font-size: 12px; fill: #4a5568; }
        .y-tick .chain-label { font-size: 10px; fill: #2d3748; }
        
        /* Tooltip styling from graphRenderer logic (for reference) */
        .tooltip-box { pointer-events: none; }
    </style>

    
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

    <!-- Do I still need this?-->
    <script src="https://cdn.jsdelivr.net/npm/d3-sankey@0.12.3"></script> 
    
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">Coreference Chain Analysis</h1>

        <div class="flex flex-wrap lg:flex-nowrap gap-4">
            
            <div id="transition-summary-container" class="chart-section flex-shrink-0" style="width: 500px;">
                <p class="text-gray-500 text-sm">Loading Transition Summary...</p>
            </div>
            
            
            <div class="chart-section flex-shrink-0" style="width: 900px;">
                <div id="graph-controls" class="px-2 py-2">
                    <label for="chain-count-slider" class="text-sm font-medium text-gray-700">Min mentions per chain:</label>
                    <input id="chain-count-slider" type="range" min="1" max="5" value="1" class="mx-3">
                    <span id="slider-value" class="text-sm text-gray-600">1</span>
                </div>
                <div id="tooltip-s" style="opacity: 0; position: absolute; background: #333; color: white; padding: 5px; border-radius: 4px; pointer-events: none;"></div>
                <div id="sankey-container">
                    <p class="text-gray-500 text-sm">Loading Transition Graph...</p>
                </div>
            </div>
        </div>

        
        <div class="my-4 p-4 bg-white rounded-lg shadow">
             <label for="conv-select" class="font-semibold text-gray-700">Select Conversation ID:</label>
             <select id="conv-select" class="ml-3 p-2 border rounded-md shadow-sm">
                 <option>Loading...</option>
             </select>
        </div>

       
        <div id="timeline-chart" class="chart-section">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Coreference Timeline</h2>
            <div id="graph-container" class="timeline-container">
                <p class="text-gray-500">Initializing D3 Timeline...</p>
            </div>
        </div>
    </div>

    <script type="module" src="./js/dataLoader.js"></script>
    <script type="module" src="./js/graphRenderer.js"></script>
    <script type="module" src="./js/main.js"></script> 
    
</body>
</html>